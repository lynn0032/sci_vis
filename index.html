<html>
<script src = 'https://d3js.org/d3.v5.min.js'></script>
<script src="https://unpkg.com/d3-simple-slider"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>

<body onload = 'init()'>
	<h1> Understanding the \(k\)-Nearest Neighbors Classification Algorithm </h1>
	<p> The \(k\)-nearest neighbor algorithm blah blah blah </p>
	<p> Given a set a labeled datapoints and a new point to classify,
		<ul>
			<li>Find the \(k\) labeled data points which are closest to the new point</li>
			<li>Those \(k\) labeled data points "vote" on which label to give the new point</li>
			<li>The new point is labeled with the most frequent label amongst the neighbors</li>
	</ul></p>
	<p> About the data breast cancer </p>
  
  <svg width=960 height=500>
	  
	  <rect x=10 y=10 width=350 height=40 style="stroke-width:1;stroke:black;fill-opacity:.1"></rect>
	  <text x=25 y=40 font-family="Verdana" font-size="20" fill="black"> Visualizing k-Nearest Neighbors </text>


	</svg>
	
<script>
	function draw_axes(){
		//code in this function is adapted from: https://www.d3-graph-gallery.com/graph/custom_axis.html
		
		// set the dimensions and margins of the graph
		var margin = {top: 20, right: 20, bottom: 40, left: 60},
    			width = 460 - margin.left - margin.right,
    			height = 400 - margin.top - margin.bottom;

		// create svg element, respecting margins
		var svg = d3.select("#title")
  			.append("svg")
    			.attr("width", width + margin.left + margin.right)
    			.attr("height", height + margin.top + margin.bottom)
  			.append("g")
    			.attr("transform","translate(" + margin.left + "," + margin.top + ")");

		// Add X axis
		var x = d3.scaleLinear().domain([0, 100]).range([0, width]);
		svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));

		// Add Y axis
		var y = d3.scaleLinear().domain([0, 100]).range([ height, 0]);
		svg.append("g").call(d3.axisLeft(y));

		// Add X axis label:
		svg.append("text").attr("text-anchor", "end").attr("x", width).attr("y", height + margin.top + 20).text("X");

		// Y axis label:
		svg.append("text").attr("text-anchor", "end").attr("transform", "rotate(-90)").attr("y", -margin.left+20).attr("x", -margin.top).text("Y");

	}
	
	async function init(){
		
		draw_axes();
		
		//plot data points
		const data = await d3.csv("https://raw.githubusercontent.com/lynn0032/sci_vis/master/bc_data.csv");
		window.points = d3.select('svg').append("g").attr("transform", "translate(300, 275)").selectAll('circle').data(data).enter().append('circle')
			.attr("cx", function(d){return 25*parseFloat(d.pc1);})
			.attr("cy",function(d){return 25*parseFloat(d.pc2);})
			.style("fill", function(d){if (d.diagnosis=="B") {return "blue";} else {return "orange";}})
			.attr("r", 5).style("fill-opacity", ".5");
        
	}
	
	</script>
	

  </body>

</html>
